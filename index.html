<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About Will Spichiger</title>
    <link rel="icon" type="image/png" href="SwissFlagFavicon.png">
    <!-- Load your local config (this must come first) -->
    <script src="config.js"></script>
    <style>
        #bike-map {
            width: 100%;
            height: 600px;
            position: relative;
        }

        #legend {
            background: white;
            padding: 10px;
            margin: 10px;
            border: 1px solid #999;
            font-size: 14px;
            max-width: 220px;
            overflow-y: auto;
            max-height: 500px;
            border-radius: 6px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
            line-height: 1.5em;
            position: absolute;
            top: 10px;
            right: 10px;
        }

        #legend div {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }

        .map-container {
            position: relative;
        }
    </style>
</head>

<<<<<<< HEAD
=======
<!-- Load your local config (this must come first) -->
<script src="config.js"></script>

<div id="bike-map" style="width: 100%; height: 600px;"></div>
<div id="legend"></div>

<div class="map-container">
    <div id="bike-map"></div>
    <div id="legend"></div>
</div>

<script>
    const script = document.createElement('script');
    script.src = `https://maps.googleapis.com/maps/api/js?key=${config.GOOGLE_MAPS_API_KEY}&callback=initBikeMap`;
    script.async = true;
    document.head.appendChild(script);

    let map;
    let bounds;

    function initBikeMap() {
        map = new google.maps.Map(document.getElementById("bike-map"), {
            center: { lat: 41.15, lng: -73.88 },
            zoom: 12,
        });

        bounds = new google.maps.LatLngBounds();

        const colors = ['#FF0000', '#0000FF', '#00FF00', '#FFFF00', '#FF00FF', '#00FFFF'];
        let colorIndex = 0;

        fetch('gpxFiles.json')
            .then(response => response.json())
            .then(gpxFiles => {
                gpxFiles.forEach(item => {
                    loadGPX(item.file, item.color, item.label);
                });
            });
    }

    function loadGPX(file, color, label) {
        fetch(file)
            .then(response => response.text())
            .then(gpxText => {
                const parser = new DOMParser();
                const xml = parser.parseFromString(gpxText, "application/xml");
                const points = xml.getElementsByTagName("trkpt");

                const routeCoords = [];
                for (let i = 0; i < points.length; i++) {
                    const lat = parseFloat(points[i].getAttribute("lat"));
                    const lng = parseFloat(points[i].getAttribute("lon"));
                    routeCoords.push({ lat, lng });
                }

                const routePath = new google.maps.Polyline({
                    path: routeCoords,
                    geodesic: true,
                    strokeColor: color,
                    strokeOpacity: 1.0,
                    strokeWeight: 3,
                });

                routePath.setMap(map);

                // Extend the map bounds to include this route
                routeCoords.forEach(coord => bounds.extend(coord));
                map.fitBounds(bounds);

                // Add to the legend
                const legend = document.getElementById('legend');
                
                // Clean up the label text
                const cleanedLabel = label.replace(/From\s+/i, '').replace(/\s+to\s+/i, ' → ');

                const item = document.createElement('div');
                item.innerHTML = `<span style="display:inline-block;width:24px;height:12px;background:${color};margin-right:8px;"></span> ${cleanedLabel}`;
                legend.appendChild(item);
            });
    }
</script>

<style>
    #bike-map {
        width: 100%;
        height: 600px;
        position: relative;
    }

    #legend {
        background: white;
        padding: 10px;
        margin: 10px;
        border: 1px solid #999;
        font-size: 14px;
        max-width: 220px;
        overflow-y: auto;
        max-height: 500px;
        border-radius: 6px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        line-height: 1.5em;
    }

    /* Position the legend over the map */
    .map-container {
        position: relative;
    }

    #legend {
        position: absolute;
        top: 10px;
        right: 10px;
    }

    #legend div {
        margin-bottom: 8px;
        display: flex;
        align-items: center;
    }
</style>
  

>>>>>>> f028ff392e282e714a89df6e19fecb14ab2cbbad
<body>
    <header>
        <h1>About Will Spichiger</h1>
        <nav>
            <ul>
                <li><a href="#">Index</a></li>
                <li><a href="./education.html">Education</a></li>
                <li><a href="./story.html">Story</a></li>
                <li><a href="./lab1_problem1.html">Story</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="map-container">
            <div id="bike-map"></div>
            <div id="legend"></div>
        </div>

        <!-- your about me / bio content as-is -->
        <!-- (I won’t repost that part since it was unchanged and well written!) -->
    </main>

    <footer>
        <p>&copy; 2025 Will Spichiger. All rights reserved.</p>
    </footer>

    <script>
        const script = document.createElement('script');
        script.src = `https://maps.googleapis.com/maps/api/js?key=${config.GOOGLE_MAPS_API_KEY}&callback=initBikeMap`;
        script.async = true;
        document.head.appendChild(script);

        let map;
        let bounds;

        function initBikeMap() {
            map = new google.maps.Map(document.getElementById("bike-map"), {
                center: { lat: 41.15, lng: -73.88 },
                zoom: 12,
            });

            bounds = new google.maps.LatLngBounds();

            fetch('gpxFiles.json')
                .then(response => response.json())
                .then(gpxFiles => {
                    gpxFiles.forEach(item => {
                        loadGPX(item.file, item.color, item.label);
                    });
                });
        }

        function loadGPX(file, color, label) {
            fetch(file)
                .then(response => response.text())
                .then(gpxText => {
                    const parser = new DOMParser();
                    const xml = parser.parseFromString(gpxText, "application/xml");
                    const points = xml.getElementsByTagName("trkpt");

                    const routeCoords = [];
                    for (let i = 0; i < points.length; i++) {
                        const lat = parseFloat(points[i].getAttribute("lat"));
                        const lng = parseFloat(points[i].getAttribute("lon"));
                        routeCoords.push({ lat, lng });
                    }

                    const routePath = new google.maps.Polyline({
                        path: routeCoords,
                        geodesic: true,
                        strokeColor: color,
                        strokeOpacity: 1.0,
                        strokeWeight: 3,
                    });

                    routePath.setMap(map);

                    routeCoords.forEach(coord => bounds.extend(coord));
                    map.fitBounds(bounds);

                    const legend = document.getElementById('legend');
                    const cleanedLabel = label.replace(/From\s+/i, '').replace(/\s+to\s+/i, ' → ');
                    const item = document.createElement('div');
                    item.innerHTML = `<span style="display:inline-block;width:24px;height:12px;background:${color};margin-right:8px;"></span> ${cleanedLabel}`;
                    legend.appendChild(item);
                });
        }
    </script>
</body>

</html>